<!DOCTYPE html>
<html>
<head>
	<title>MadHacks: Sign up</title>
	<link rel="stylesheet" type="text/css" href="/css/inputs.css">
	<link rel="stylesheet" type="text/css" href="/css/application.css">
	<script type="text/javascript" src="/js/jquery.js"></script>
	<script type="text/javascript">
		var showing = 0;
		var shades;
		var orderArr = [
			[0,1,2,3,4,5],
			[1,0,1,2,3,4],
			[2,1,0,1,2,3],
			[3,2,1,0,1,2],
			[4,3,2,1,0,1],
			[5,4,3,2,1,0]
		];
		var validate = {

		}
		var order = function(){
			$.each(shades, function(index, obj){				
				var left, zindex, opacity;

				left = $(window).width()/2;
				left -= $(obj).width()/2;
				left += 40*(index-showing);

				zindex = orderArr[showing][index];

				opacity = zindex/5;
				opacity = 1 - opacity;

				$(obj).css({"left":left, "z-index":1000-zindex, "opacity":opacity });
			});
		}
		$(document).ready(function(){
			shades = $(".inner");
			order();
			var moveRight = function(){
				showing = (showing+1) % shades.length;
				order();
			};
			$(".left").click(function(){
				showing = (showing-1) % shades.length;
				order();
			});
			$("#school-attend-school").change(function (){
				$("#school-selector").slideToggle();
				$("#school-school").removeClass("error");
			});
			$("input[name='travel']:radio").change(function () {
				$("#venmo").slideToggle();
				$("#school-venmo").removeClass("error");
			});
			$("#hacker-plan-hardware").change(function (){
				$("#plan-hardware-on").slideToggle();
				$("#hacker-plan-hardware-on").removeClass("error");
			});
			$("#hacker-need-partner, #hacker-plan-mentor").change(function (){
				if( $("#hacker-need-partner").prop('checked')
				 || $("#hacker-plan-mentor").prop('checked') )
					$("#partner").slideDown();
				else{
					$("#partner").slideUp();
					$("#hacker-need-partner-skills").removeClass("error");
				}
			});
			$("#resume-button").click(function (){
				console.log("click")
				$("#resume-button-shadow").click();
			});
			$("#resume-button-shadow").change(function(e){
				$("#resume-button").find("div").text(e.target.files[0].name);
				$("#resume-button").addClass("done");
			});
			var validateLength = function ($input){
				if($input.val().length <= 0)
					$input.addClass("error");
			}
			var validateSelect = function ($input){
				if($input.val() == null)
					$input.addClass("error");
			}
			$("#validate-general").click(function(){
				$this = $(this).closest("ul");
				validateLength($this.find("#general-first-name"));
				validateLength($this.find("#general-last-name"));
				validateLength($this.find("#general-email"));
				validateLength($this.find("#general-password"));
				validateSelect($this.find("#general-swag-size"));
				
				if($this.find(".error").length <= 0)
					moveRight();
			});
			$("#validate-school").click(function(){
				$this = $(this).closest("ul");
				if($this.find("#school-attend-school").prop("checked")){
					validateSelect($this.find("#school-school"));
				}
				validateLength($this.find("#school-city"));
				validateLength($this.find("#school-zip"));
				validateSelect($this.find("#school-state"));
				validateSelect($this.find("#school-country"));
				if($this.find("#school-travel-yes").prop("checked")){
					validateLength($this.find("#school-venmo"));
				}
				
				if($this.find(".error").length <= 0)
					moveRight();
			});
			$("#validate-diet").click(function(){
				moveRight();
			});
			$("#validate-resume").click(function(){
				$this = $(this).closest("ul");
				var resume = $this.find("#resume-button-shadow");
				if(resume.val().length <= 0){
					resume.addClass("error");
					$("#resume-button").addClass("error");
				}
				if($this.find(".error").length <= 0)
					moveRight();
			});
			
			$("form").on("change", ".error", function (){
				console.log("focus")
				$(this).removeClass("error");
				if($(this).attr("type") == "file")
					$("#resume-button").removeClass("error");
			});
			$("textarea").change(function (){
				var id = $(this).attr("id");
				var text = $(this).val();
				console.log("change", id, text);
				$("#"+id+"-shadow").val(text);
			});
			$("#application").submit(function (e){
				e.preventDefault();
				$.ajax({
					url:"/users/apply",
					type:"POST",
					data:$(this).serialize(),
					dataType:"json",
					success:function (result){
						console.log(result)
					},
					error: function(error){
						console.log(error)
					},
					complete: function(a){
						console.log("complete", a)
					}
				})
			});

		});
	</script>
</head>
</html>
<form class="container" id="application" action="/user/apply" method="POST">
	<div id="general" class="inner">
		<ul>
			<li class="split">
				<input type="text" id="general-last-name" name="firstname" placeholder="First Name">
				<input type="text" id="general-first-name" name="lastname" placeholder="Last Name">
			</li>
			<li class="split">
				<input type="text" id="general-email" name="email" placeholder="Email">
				<input type="password" id="general-password" name="password" placeholder="Password">
			</li>
			<li>
				<select id="general-swag-size" name="swag_size">
					<option selected disabled hidden value='#'>Swag Size</option>
					<option value="xs">xSmall</option>
					<option value="s">Small</option>
					<option value="m">Medium</option>
					<option value="l">Large</option>
					<option value="xl">xLarge</option>
					<option value="xxl">xxLarge</option>
					<option value="xxxl">xxxLarge</option>
				</select>
			</li>
			<li>
				<hr>
			</li>
			<li class="split">
				<d>&nbsp;</d>
				<button id="validate-general" class="right" type="button"><div>Next</div></button>
			</li>
		</ul>
	</div>
	<div id="school" class="inner">
		<ul>
			<li>
				<input type="checkbox" id="school-attend-school" name="attend_school" checked>
				<label for="school-attend-school">Do you attend a university?<div><div></div></div></label>
			</li>
			<li id="school-selector">
				<%include part_school_select %>
			</li>
			<li class="split">
				<%include part_state_select %>
				<%include part_country_select %>
			</li>
			<li class="split">
				<input type="text" id="school-city" name="city" placeholder="City">
				<input type="text" id="school-zip" name="zip" placeholder="Zip">
			</li>
			<li class="split">
				<span>Travel Reimbursment: </span>
				<div>
					<input type="radio" id="school-travel-no" name="travel" value="false" autocomplete="off" checked>
					<label for="school-travel-no">No:<div><div></div></div></label>
					<input type="radio" id="school-travel-yes" name="travel" value="true" autocomplete="off">
					<label for="school-travel-yes">Yes:<div><div></div></div></label>
				</div>
			</li>
			<li id="venmo" class="split" style="display:none;">
				<span>venmo.com/</span>
				<input type="text" id="school-venmo" name="venmo" placeholder="Venmo ID">
			</li>
			<li>
				<hr>
			</li>
			<li class="split">
				<button class="left" type="button"><div>Previous</div></button>
				<button id="validate-school" class="right" type="button"><div>Next</div></button>
			</li>
		</ul>
	</div>
	<div id="diet" class="inner">
		<ul>
			<li>
				<span>Dietary Restrictions</span>
			</li>
			<li class="split">
				<div>
					<input type="checkbox" id="apply-food-vegetarian" name="food_vegetarian">
					<label for="apply-food-vegetarian">Vegetarian&nbsp;<div><div></div></div></label>
				</div>
				<div>
					<input type="checkbox" id="apply-food-vegan" name="food_vegan">
					<label for="apply-food-vegan"><div><div></div></div>&nbsp;Vegan</label>
				</div>
			</li>
			<li class="split">
				<div>
					<input type="checkbox" id="apply-food-glutenfree" name="food_glutenfree">
					<label for="apply-food-glutenfree">&nbsp;Gluten Free<div><div></div></div></label>	
				</div>
				<div>
					<input type="checkbox" id="apply-food-pescetarian" name="food_pescetarian">
					<label for="apply-food-pescetarian"><div><div></div></div>&nbsp;Pescetarian</label>
				</div>
			</li>
			<li class="split">
				<div>
					<input type="checkbox" id="apply-food-dairyfree" name="food_dairyfree">
					<label for="apply-food-dairyfree">Dairy Free&nbsp;<div><div></div></div></label>
				</div>
				<div>
					<input type="checkbox" id="apply-food-kosher" name="food_kosher">
					<label for="apply-food-kosher"><div><div></div></div>&nbsp;Kosher</label>
				</div>
			</li>
			<li class="split">
				<div>
					<input type="checkbox" id="apply-food-halal" name="food_halal">
					<label for="apply-food-halal">Halal&nbsp;<div><div></div></div></label>
				</div>
				<input type="text" id="apply-food-other" style="padding-top:0;margin-top:0;" name="food_other" placeholder="Other">
			</li>
			<li>
				<hr>
			</li>
			<li class="split">
				<button class="left" type="button"><div>Previous</div></button>
				<button id="validate-diet" class="right" type="button"><div>Next</div></button>
			</li>
		</ul>
	</div>
	<div id="resume" class="inner">
		<ul>
			<li class="split">
				<span>github.com/</span>
				<input type="text" id="apply-Github" name="Github" placeholder="Github">
			</li>
			<li class="split">
				<span>linkedin.com/in/</span>
				<input type="text" id="apply-linkedIn" name="linkedIn" placeholder="linkedIn">
			</li>
			<li class="split">
				<span>dribbble.com/</span>
				<input type="text" id="apply-Dribble" name="Dribble" placeholder="Dribble">
			</li>
			<li class="split">
				<span>Resume</span>
				<input style="display:none" id="resume-button-shadow" type="file">
				<button id="resume-button" type="button">
					<div>Select Resume</div>
				</button>
			</li>
			<li>
				<hr>
			</li>
			<li class="split">
				<button class="left" type="button"><div>Previous</div></button>
				<button id="validate-resume" class="right" type="button"><div>Next</div></button>
			</li>
		</ul>
	</div>
	<div id="hacker" class="inner">
		<ul>
			<li>
				<label for="hacker-exposure">How did you hear about MadHacks?</label>
				<textarea multiline="true" id="hacker-exposure"></textarea>
				<input type="text" id="hacker-exposure-shadow" style="display:none;" name="exposure" placeholder="How did you hear about Madhacks?">
			</li>
			<li>
				<input type="checkbox" id="hacker-plan-hardware" name="plan_hardware">
				<label for="hacker-plan-hardware">Do you plan to hack on hardware?<div><div></div></div></label>
			</li>
			<li id="plan-hardware-on" style="display:none;">
				<label for="hacker-exposure">What Hardware do you want to hack on?</label>
				<textarea multiline="true" id="hacker-plan-hardware-on"></textarea>
				<input type="text" name="plan_hardware_on" id="hacker-plan-hardware-on-shadow" style="display:none;">
			</li>
			<li>
				<input type="checkbox" id="hacker-plan-mentee" name="plan_mentee">
				<label for="hacker-plan-mentee">Do you want to be a mentee?<div><div></div></div></label>
			</li>
			<li>
				<input type="checkbox" id="hacker-plan-mentor" name="plan_mentor">
				<label for="hacker-plan-mentor">Do you want to be a mentor?<div><div></div></div></label>
			</li>
			<li>
				<input type="checkbox" id="hacker-need-partner" name="need_partner">
				<label for="hacker-need-partner">Are you looking for partners?<div><div></div></div></label>
			</li>
			<li id="partner" style="display:none;">
				<label for="hacker-exposure">What are some of your areas of knowledge?</label>
				<textarea multiline="true" id="hacker-need-partner-skills"></textarea>
				<input type="text" name="plan_need_partner_skills" id="hacker-need-partner-skills-shadow" style="display:none;">
			</li>
			<li>
				<hr>
			</li>
			<li class="split">
				<button class="left" type="button"><div>Previous</div></button>
				<button class="right" type="submit"><div>Submit</div></button>
			</li>
		</ul>
	</div>
</div>

<style type="text/css">
	

</style>
<style>

</style>

<%include part_foot %>