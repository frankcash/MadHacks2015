<html>
<canvas id="logo" class="lightFunkers"></canvas>

<script>
	var rod = new Image();
	var timeout;
	rod.onload = function(){
		window.resize()
	}
	logo = document.getElementById("logo");
	window.resize = function(){
		if(timeout != undefined)
			clearTimeout(timeout);

		logo.width = window.innerWidth;
		logo.height = window.innerHeight;
		rod.draw_height = logo.height;
		rod.draw_width = rod.draw_height*rod.width/rod.height;
		

		var logoCtx = logo.getContext("2d");
		var xGrad = logo.width/20;
		var yShift = logo.height/100;
		var endY = logo.height;
		var xRandom = logo.width/10;
		var yRandom = logo.height/10;

		logoCtx.lineWidth = 2;
		logoCtx.strokeStyle = '#eef';
		logoCtx.shadowBlur = 50; 
		logoCtx.shadowColor = "rgba(150,100,255,1)";
		
		var lines = [];

		while(endY > logo.height/3*2){
			var points = [];
			points.push({x:rod.draw_width/2, y:0});

			var slope = (endY - points[0].y)/(logo.width/2 - points[0].x);

			var next = {
				x:xGrad*(1),
				y:slope*(1)
			};
			
			points.push(next);
			while(points[points.length-1].x < logo.width/2){
				
				next = {};
					next.x = xGrad*(points.length-1);
					next.y = slope*(xGrad*(points.length-1));
				
				points.push(next);
			}
			points[points.length-1].x = logo.width/2;
			points[points.length-1].y = endY;

			lines.push(points);
			endY -= yShift;
		}

		var lineNum = 0;
		var drawLine = function(){
			
			var pointNum = 0;
			logoCtx.clearRect(0,0,logo.width, logo.height);
			logoCtx.stroke();
			logoCtx.shadowBlur = 0; 
			logoCtx.drawImage(rod,0,0, rod.draw_width, rod.draw_height);
			logoCtx.save();
			{
				logoCtx.scale(-1, 1);
				logoCtx.drawImage(rod,-logo.width+rod.draw_width,0, -rod.draw_width, rod.draw_height);
			}
			logoCtx.restore();
			logoCtx.shadowBlur = 50; 
			logoCtx.beginPath();
			var xrand_old = 0;
			var yrand_old = 0;
			var drawPoint = function(){
				var xrand = 0;
				var yrand = 0;
				if(pointNum != 0 && pointNum != lines[lineNum].length-1){
					xrand = Math.random()*xRandom - xRandom/2;
					yrand = Math.random()*yRandom - yRandom/2;		
				}
				
				logoCtx.moveTo(	lines[lineNum][pointNum].x + xrand_old,
								lines[lineNum][pointNum].y + yrand_old);
				logoCtx.lineTo(	lines[lineNum][pointNum+1].x+xrand,
								lines[lineNum][pointNum+1].y+yrand);
				
				logoCtx.moveTo(	logo.width-lines[lineNum][pointNum].x - xrand_old ,
								lines[lineNum][pointNum].y + yrand_old);
				logoCtx.lineTo(	logo.width-lines[lineNum][pointNum+1].x-xrand,
								lines[lineNum][pointNum+1].y+yrand);
				
				
				xrand_old = xrand;
				yrand_old = yrand;

				pointNum++;
				if(pointNum+1 != lines[lineNum].length){
					timeout = setTimeout(drawPoint, 5);
				}else{
					logoCtx.closePath();
					lineNum++;
					if(lineNum == lines.length)
						lineNum = 0;
					timeout = setTimeout(drawLine, 5);
				}
			}
			
			drawPoint();
		}
		drawLine();
	}
	rod.src = "/img/rod.svg";

</script>
<style>
	html, body{
		padding: 0px;
		margin: 0px;	
	}
	#logo{
		background:black;
		width: 100vw;
		height: 100vh;
	}
</style>
</html>